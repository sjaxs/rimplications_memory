\subsection{Generadores aleatorios}

A la hora de realizar pruebas con un algoritmo, lo m\'as aconsejable es que se realice con conjuntos generados de forma aleatoria, para 
que, por ejemplo, los an\'alisis de tiempo no est\'en influidos por dichos conjuntos. Actualmente, en la comunidad de FCA (Formal Concept 
Analysis) no existe nada parecido, por lo que se ha decidido realizar dos funciones que puedan ser usadas para este fin y ponerlas a 
disposici\'on de toda la comunidad junto a este paquete, para que cualquier persona que quiera, pueda utilizarlas.

As\'i que, como se ha comentado anteriormente, se han realizado dos funciones diferentes, una que genera sistemas de implicaciones 
aleatorios y otro de contextos aleatorios.

A continuaci\'on se van a detallar ambas funciones:

\subsubsection{Sistemas de implicaciones aleatorios}

    \textbf{Descripci\'on}
    
    Esta funci\'on va a generar uno o m\'as sistemas de implicaciones siguiendo una serie de par\'ametros que se pueden elegir a la 
    hora de ejecutar dicha funci\'on para obtener el conjunto como sea m\'as adecuado a lo que se desee hacer.

    Los atributos de las implicaciones van a ser del tipo a0, a1... Comenzando en 0, de forma consecutiva hasta el n\'umero que sea 
    necesario para tener todos los atributos que el usuario quiera.

    Los par\'ametros de esta funci\'on son:

    \begin{itemize}
        \item \textbf{numAttributes:}

        Aqu\'i se debe especificar cu\'antos atributos diferentes se quiere que tengan las implicaciones que se van a generar. Es un 
        par\'ametro obligatorio para la utilizaci\'on de esta funci\'on. Como se ha comentado anteriormente, los atributos ser\'an de la 
        forma a0, a1, a2... El valor de este par\'ametro debe ser mayor que 0.


        \item \textbf{numDependencies:}

        Otro par\'ametro obligatorio es el n\'umero de dependencias que se quieren obtener, si se elige obtener m\'as de un archivo 
        con diferentes sistemas de implicaciones, como se ver\'a m\'as adelante, cada uno de dichos ficheros incluir\'a el n\'umero 
        de implicaciones que se le indique aqu\'i. Por supuesto, el valor de este par\'ametro tambi\'en debe ser mayor que 0.


        \item \textbf{difference:}

        Este par\'ametro opcional indica el n\'umero m\'aximo de diferencia de elementos entre el antecedente y el consecuente. Se puede 
        insertar un n\'umero negativo, lo que indicar\'a que se desea que haya m\'as atributos en el consecuente. Por lo que si el n\'umero 
        es positivo, el antecedente tendr\'a m\'as atributos.

        En este caso, hay que tener en cuenta que el valor absoluto del n\'umero insertado en este par\'ametro, debe ser menor 
        que el n\'umero total de atributos.

        En caso de no especificar nada, la diferencia de atributos entre antecedente y consecuente ser\'a aleatoria.


        \item \textbf{percentage:}

        Este par\'ametro es bastante parecido al anterior, solo que en este caso, se trata del m\'aximo porcentaje de diferencia entre 
        el antecedente y el consecuente. Al igual que en el anterior, si el porcentaje es negativo, el consecuente ser\'a mayor, y en caso de 
        ser positivo, el antecedente tendr\'a m\'as atributos que el consecuente. Al ser un porcentaje, el valor debe ser menor estricto que 
        100.

        Cabe especificar, que tanto este par\'ametro, como el anterior, se tratan de tama\~nos m\'aximos, es decir, que no todas las implicaciones 
        van a tener la diferencia exacta que se le especifique entre antecedente y consecuente, sino que el n\'umero o porcentaje ser\'a la 
        mayor diferencia que se encontrar\'a en el sistema de implicaciones.


        \item \textbf{maxLeftSize:}

        Con este par\'ametro opcional, se puede especificar el n\'umero de elementos m\'aximo que se quiere que tenga el antecedente, como 
        es de esperar, no debe superar al n\'umero total de atributos.


        \item \textbf{maxRightSize:}

        Junto con el anterior, podemos especificar, en este caso, el n\'umero de elementos m\'aximo del consecuente. Ambos son par\'ametros 
        opcionales, pero si el usuario decide especificar el tama\~no m\'aximo del antecedente, tambi\'en deber\'a hacer lo mismo con el 
        consecuente y viceversa.


        \item \textbf{nameExitFile:}

        Este se trata de un par\'ametro obligatorio, se le debe pasar una cadena de caracteres sin la extensi\'on del archivo, ya que 
        la funci\'on devolver\'a un archivo con extensi\'on .R.


        \item \textbf{numFiles:}

        Por \'ultimo, un par\'ametro opcional en el que se puede especificar cu\'antos ficheros se quiere que se generen. Si no se especifica, 
        solo se generar\'a un archivo, en caso contrario, los archivos tendr\'an como nombre el especificado seguido de un guion bajo y un n\'umero 
        para distinguirlos.

    \end{itemize}

    Hay que precisar, que algunos de los par\'ametros anteriores son excluyentes. Es decir, si se especifica el par\'ametro difference, tanto 
    percentage, como maxLeftSize y maxRightSize deben dejarse nulos. O si se especifica percentage, deber\'an quedar vac\'ios difference y 
    maxLeftSize y maxRightSize. 
    En cambio, maxLeftSize siempre debe ir acompa\~nado de maxRightSize y viceversa, aunque en caso de especificarlos, difference y percentage, 
    deben estar nulos.
    Los par\'ametros que siempre se le deben pasar a la funci\'on son: numAttributes, numDependencies y nameExitFile.

    Por \'ultimo, hay que especificar que el sistema o sistemas de implicaciones que se obtengan, no tendr\'an redundancias y se habr\'a aplicado 
    la funci\'on de composici\'on, por lo que al realizar todas estas operaciones, si el n\'umero de implicaciones que se quiere obtener es 
    alto, el tiempo que tardar\'a el algoritmo en obtener dicho sistema, tambi\'en ser\'a alto.
    \\

    \bigskip

    \textbf{C\'odigo}

    \lstinputlisting{r_code/randomGenerators/randomImp.R}
    \clearpage


    \textbf{Ejemplo}

    Como se ha visto anteriormente, este algoritmo se puede utilizar con muchas combinaciones diferentes dependiendo de los par\'ametros 
    que se utilicen. As\'i que, se van a proponer tres ejemplos diferentes de c\'omo usar esta funci\'on, aunque las posibilidades 
    son mucho mayores.

    \bigskip

    \begin{figure}[H]
        \centering
        \includegraphics{randomImp1}
        \caption{Ejemplo 1 de sistemas de implicaciones aleatorios}
        \label{fig:randomImp1}
    \end{figure}

    En este primer ejemplo, se va a generar un sistema con cuatro implicaciones, utilizando 6 atributos diferentes, con una diferencia m\'axima 
    de 3 elementos entre el antecedente y el consecuente, siendo mayor el antecedente, como nombre del fichero se utilizar\'a ejemplo1.
    
    En dicho fichero se ha escrito lo siguiente:

    \begin{verbatim}
        a1 a3 a4 a6 -> a5 
        a1 a2 a4 a5 -> a6 
        a3 a6 -> a4 
        a1 a2 a6 -> a3    
    \end{verbatim}

    \clearpage

    \begin{figure}[H]
        \centering
        \includegraphics{randomImp2}
        \caption{Ejemplo 2 de sistemas de implicaciones aleatorios}
        \label{fig:randomImp2}
    \end{figure}

    En este segundo ejemplo se han generado con 10 atributos, 6 implicaciones, con un tama\~no m\'aximo de 4 para el antecedente y 3 para el 
    consecuente. El nombre del fichero de salida ser\'a ejemplo2.

    \begin{verbatim}
        a1 a10 a6 a7 -> a9 
        a5 -> a4 
        a10 a3 a6 a8 -> a9 
        a8 -> a9 
        a1 a10 a6 -> a7 
        a3 a7 a9 -> a4 
    \end{verbatim}
    Como se puede observar, la salida cumple todos los requisitos que le hemos puesto. En este caso, se observa que solo se han usado 9 de 
    los 10 atributos que se ped\'ian, ya que con la simplificaci\'on del conjunto, se ha llegado a perder el atributo a2.
    \\
    
    \bigskip

    Por \'ultimo, se ejecuta una tercera vez esta funci\'on para comprobar c\'omo es el error que se produce, en este caso, al pasarle vac\'io 
    el nombre del fichero de salida:

    \begin{figure}[H]
        \centering
        \includegraphics{randomImp3}
        \caption{Ejemplo 3 de sistemas de implicaciones aleatorios}
        \label{fig:randomImp3}
    \end{figure}

    


    

\subsubsection{Contextos aleatorios}

    \textbf{Descripci\'on}

    Un contexto formal \( (G, M, I) \) consiste en dos conjuntos, G y M, y una relaci\'on binaria \( I \subseteq G x M \). Los elementos 
    de G se llaman objetos, los de M, atributos de \( (G, M, I) \). Si \(g \in G ~ y ~ m \in M \) son una relaci\'on I, se escribir\'a 
    \( (g,m) \in I ~ o ~ g I m \) y se leer\'a como ``el objeto g tiene el atributo m".

    \textcolor{red}{A\~nadir referencia paper}

    La manera habitual de representar un contexto formal es mediante una tabla, la cual contar\'a con una fila para cada objeto y una columna 
    para cada atributo, con una cruz en la intersecci\'on entre una fila g con una columna m sii el objeto g tiene un atributo m, \(g,m) \in 
    I \).

    Por ello, la estructura m\'as sencilla a la hora de programar un algoritmo para contextos formales en R ser\'a un data.frame.
    \\


    Luego, en este caso, esta funci\'on va a generar un contexto formal siguiendo algunos par\'ametros que se pueden elegir a la 
    hora de ejecutar dicha funci\'on para obtener el contexto lo m\'as adecuado posible para lo que se desee.

    Los objetos del contexto se van a representar como obj1, obj2... y los atributos como att1, att2... Ambos comenzando en 1, de forma 
    consecutiva hasta el n\'umero que el usuario indique.
    \\

    Los par\'ametros de esta funci\'on son:

    \begin{itemize}
        \item \textbf{num.obj:}

        Con este par\'ametro obligatorio se indicar\'a el n\'umero de objetos que debe tener el contexto, o lo que es lo mismo, 
        cu\'antas filas tendr\'a el data.frame. Este par\'ametro debe ser mayor que uno, 
        ya que no tendr\'ia sentido crear un contexto sin objetos.


        \item \textbf{num.attr:}

        Este par\'ametro obligatorio indicar\'a cual ser\'a el n\'umero de atributos del contexto, es decir, las columnas que tendr\'a el 
        data.frame. De nuevo, debe ser un n\'umero mayor que uno, ya que tampoco tendr\'ia sentido en este caso crear un contexto sin 
        atributos.

        \item \textbf{sparness:}

        Como par\'ametro opcional, tenemos la dispersi\'on, es decir la probabilidad de que un objeto tenga un atributo, o lo que es 
        lo mismo a la hora de programarlo, que en el cruce de columna y fila, haya un uno.
        Como este par\'ametro se trata de una probabilidad, su valor debe estar entre 0 y 1.

    \end{itemize}


    Cuando se utilice la funci\'on, esta devolver\'a un data.frame, siendo los nombres de filas los objetos, y los de las columnas 
    los atributos.


    \bigskip

    \textbf{C\'odigo}

    A la hora de optimizar el c\'odigo, si el par\'ametro sparness no est\'a vac\'io, se ha decidido generar aleatoriamente el n\'umero de 
    unos o ceros dependiendo de cu\'al de los dos sea menor. Es decir, si el usuario inserta en el par\'ametro sparness 0.2, con 4 objetos 
    y 5 atributos, esto querr\'a decir que debe haber cuatro unos entre los 20 elementos a generar aleatoriamente. Por lo que en este caso, 
    el n\'umero de unos ser\'a menor que el de ceros, as\'i que se colocar\'an cuatro unos aleatoriamente, rellenando las dem\'as posiciones 
    del data.frame de ceros.

    Como el algoritmo se va a ejecutar de formas diferentes dependiendo de las entradas que elija el usuario, se ha decidido modularizarlo 
    para poder comprenderlo bien. Veamos las diferentes partes:

    \clearpage

    Aqu\'i tenemos el algoritmo principal, que ser\'a el que el usuario utilice:

    \lstinputlisting{r_code/randomGenerators/context.R}
    \bigskip

    En el caso de que el usuario no especifique el par\'ametro sparness, el contexto se generar\'a totalmente de forma aleatoria:

    \lstinputlisting{r_code/randomGenerators/noSpar.R}
    \clearpage

    Y como se ha especificado anteriormente, dependiendo de cu\'al sea la probabilidad de dispersi\'on elegida por el usuario, se generar\'an 
    los unos o los ceros:

    \lstinputlisting{r_code/randomGenerators/ones.R}
    \bigskip
    \lstinputlisting{r_code/randomGenerators/zeros.R}
    \bigskip

    \textbf{Ejemplo}

    Como primer ejemplo, se va a generar un contexto sin el par\'ametro sparness, con 4 objetos y 5 atributos:

    \begin{figure}[H]
        \centering
        \includegraphics{randomC1}
        \caption{Ejemplo 1 de contexto aleatorios}
        \label{fig:randomC1}
    \end{figure}

    \bigskip
    Y como segundo ejemplo, un contexto con 6 objetos y 8 atributos, con 0.5 de sparness:

    \begin{figure}[H]
        \centering
        \includegraphics{randomC2}
        \caption{Ejemplo 2 de contexto aleatorios}
        \label{fig:randomC2}
    \end{figure}

    Como podemos observar, el n\'umero de ceros y unos es el mismo, ya que se ha elegido como par\'ametro de esparness 0.5.
    